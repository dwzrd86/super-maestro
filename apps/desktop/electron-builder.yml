appId: sh.supermaestro.desktop
productName: Super Maestro
electronVersion: 31.7.7
asar: true
afterAllArtifactBuild: ./scripts/sign-appimage.js

directories:
  output: dist

files:
  - "**/*"
  - "!dist/**/*"
  - "!node_modules/.cache/**/*"
  - "!scripts/**/*"

extraResources:
  - from: ../web/.next/standalone
    to: web/.next/standalone
  - from: ../web/.next/static
    to: web/.next/static
  - from: ../web/public
    to: web/public
  - from: ../runner
    to: runner

publish:
  - provider: generic
    url: https://updates.supermaestro.invalid/desktop
    channel: latest

linux:
  target:
    - AppImage
  category: Utility
  artifactName: SuperMaestro-${version}-${arch}.${ext}
  desktop:
    Name: Super Maestro
    Comment: Retro-styled AI agent orchestrator
    Categories: Utility;Development;
  publish:
    - provider: generic
      url: https://updates.supermaestro.invalid/appimage
      channel: latest

mac:
  target:
    - dmg
    - zip
  category: public.app-category.productivity
  artifactName: SuperMaestro-${version}-mac-${arch}.${ext}
  icon: build/icon.icns
  publish:
    - provider: generic
      url: https://updates.supermaestro.invalid/mac
      channel: latest

win:
  target:
    - nsis
  artifactName: SuperMaestro-${version}-win-${arch}.${ext}
  icon: build/icon.ico
  publish:
    - provider: generic
      url: https://updates.supermaestro.invalid/win
      channel: latest

nsis:
  oneClick: true
  perMachine: false
  allowToChangeInstallationDirectory: false
